<view class="index-container">
  <!-- é¡¶éƒ¨åŒºåŸŸï¼šåº—é“ºä¿¡æ¯å’Œæœç´¢æ¡† -->
  <view class="top-section">
    <view class="shop-info" bindtap="goToShopInfo">
      <image class="shop-logo" src="{{homeData.shopInfo.logo || '/images/default-logo.png'}}" mode="aspectFill"></image>
      <view class="shop-name-status">
        <text class="shop-name">{{homeData.shopInfo.name || 'æ‰«ç ç‚¹é¤'}}</text>
        <view class="shop-status {{homeData.shopInfo.status === 1 ? 'open' : 'closed'}}">
          {{homeData.shopInfo.status === 1 ? 'è¥ä¸šä¸­' : 'ä¼‘æ¯ä¸­'}}
        </view>
      </view>
      <text class="shop-slogan">{{homeData.shopInfo.slogan || 'æ‰«ç ç‚¹é¤ï¼Œä¾¿æ·ç”Ÿæ´»'}}</text>
    </view>

    <view class="search-bar" bindtap="goToSearch">
      <text class="search-icon">ğŸ”</text>
      <text class="search-placeholder">æœç´¢èœå“</text>
    </view>
  </view>

  <!-- åˆ†ç±»å¯¼èˆª -->
  <scroll-view class="category-nav" scroll-x="true" enable-flex="true" show-scrollbar="false">
    <view 
      wx:for="{{homeData.categories}}" 
      wx:key="id" 
      class="category-item {{currentCategoryId === item.id ? 'active' : ''}}" 
      bindtap="goToCategory" 
      data-category-id="{{item.id}}" 
      data-category-name="{{item.name}}"
    >
      <text>{{item.name}}</text>
    </view>
    
    <!-- éª¨æ¶å± -->
    <block wx:if="{{!homeData.categories || homeData.categories.length === 0}}">
      <view class="category-item skeleton-bg" wx:for="{{4}}" wx:key="index"></view>
    </block>
  </scroll-view>

  <!-- åŠ è½½ä¸­ -->
  <view wx:if="{{isLoading}}" class="loading-container">
    <view class="loading-dots">
      <view class="loading-dot"></view>
      <view class="loading-dot"></view>
      <view class="loading-dot"></view>
    </view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- æ¨èèœå“ -->
  <view class="dish-section" wx:if="{{homeData.recommendDishes && homeData.recommendDishes.length > 0}}">
    <text class="section-title">æ¨èèœå“</text>
    <view class="dish-list">
      <view wx:for="{{homeData.recommendDishes}}" wx:key="id" class="dish-item" bindtap="goToDishDetail" data-dish-id="{{item.id}}">
        <image class="dish-image" src="{{item.image || '/images/default-logo.png'}}" mode="aspectFill"></image>
        <view class="dish-info">
          <text class="dish-name">{{item.name}}</text>
          <text class="dish-price">{{item.price}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- çƒ­é—¨èœå“ -->
  <view class="dish-section" wx:if="{{homeData.hotDishes && homeData.hotDishes.length > 0}}">
    <text class="section-title">çƒ­é—¨èœå“</text>
    <view class="dish-list">
      <view wx:for="{{homeData.hotDishes}}" wx:key="id" class="dish-item" bindtap="goToDishDetail" data-dish-id="{{item.id}}">
        <image class="dish-image" src="{{item.image || '/images/default-logo.png'}}" mode="aspectFill"></image>
        <view class="dish-info">
          <text class="dish-name">{{item.name}}</text>
          <text class="dish-price">{{item.price}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ–°å“èœå“ -->
  <view class="dish-section" wx:if="{{homeData.newDishes && homeData.newDishes.length > 0}}">
    <text class="section-title">æ–°å“ä¸Šå¸‚</text>
    <view class="dish-list">
      <view wx:for="{{homeData.newDishes}}" wx:key="id" class="dish-item" bindtap="goToDishDetail" data-dish-id="{{item.id}}">
        <image class="dish-image" src="{{item.image || '/images/default-logo.png'}}" mode="aspectFill"></image>
        <view class="dish-info">
          <text class="dish-name">{{item.name}}</text>
          <text class="dish-price">{{item.price}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- éª¨æ¶å± -->
  <block wx:if="{{!homeData.recommendDishes || homeData.recommendDishes.length === 0}}">
    <view class="dish-section skeleton-section">
      <view class="section-title skeleton-bg"></view>
      <view class="dish-list">
        <view class="dish-item skeleton-item" wx:for="{{4}}" wx:key="index">
          <view class="skeleton-image"></view>
          <view class="skeleton-info">
            <view class="skeleton-text"></view>
            <view class="skeleton-text skeleton-price"></view>
          </view>
        </view>
      </view>
    </view>
  </block>

  <view class="no-data-tip" wx:if="{{!isLoading && !homeData.shopInfo && !homeData.categories.length && !homeData.recommendDishes.length && !homeData.hotDishes.length && !homeData.newDishes.length}}">
    æš‚æ— æ•°æ®ï¼Œè¯·ç¨åé‡è¯•æˆ–è”ç³»å•†å®¶ã€‚
  </view>

</view> 